<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/d3"></script>

  <script src="//unpkg.com/globe.gl"></script>
  <!--<script src="../../dist/globe.gl.js"></script>-->
</head>

<body>
  <div id="globeViz"></div>
<!-- nodes with simple data includes network, category, color, date -->
  <script>
    const colorScale = d3.scaleOrdinal(['orangered', 'yellow', 'green', 'mediumblue']);  
    const elem = document.getElementById('globeViz');
    const myPointsOnEarth = Globe()
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
      .showGraticules(true)
      .showAtmosphere(true)
      .labelText(false)
      // .labelSize(2.1)
      .labelDotRadius(0.9)
      .labelColor(d => colorScale(d.network))
      .labelLabel(d => `
          <div><b>${d.label}</b></div>
          <div>${d.network} - ${d.program}</div>
          <div>Update @ <i>${new Date(d.date).toLocaleDateString()}</i></div>
        `)
      .onLabelClick(d => window.open(d.url, '_blank'))
      (elem);
  
    fetch('./node-net-cat-prog.json').then(r => r.json()).then(landPoints => {
      myPointsOnEarth.labelsData(landPoints);
    });
  </script>
  <!-- ********** -->

  <!-- Random Arcs -->
<!-- 
  <script>
    // Gen random data
    const N = 20;
    const arcsData = [...Array(N).keys()].map(() => ({
      startLat: (Math.random() - 0.5) * 180,
      startLng: (Math.random() - 0.5) * 360,
      endLat: (Math.random() - 0.5) * 180,
      endLng: (Math.random() - 0.5) * 360,
      color: [['red', 'white', 'blue', 'green'][Math.round(Math.random() * 3)], ['red', 'white', 'blue', 'green'][Math.round(Math.random() * 3)]]
    }));

    Globe()
      .globeImageUrl('earth-night.jpg')
      .arcsData(arcsData)
      .arcColor('color')
      .arcDashLength(() => Math.random())
      .arcDashGap(() => Math.random())
      .arcDashAnimateTime(() => Math.random() * 4000 + 500)
    (document.getElementById('globeViz'))

  </script> -->
  <!-- ********* -->

 <!-- total number of nodes in a point with detail list for mouse hover -->
  <!-- <script>

    const myGlobe = Globe()
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
      .hexBinPointLat(d => d.geometry.coordinates[1])
      .hexBinPointLng(d => d.geometry.coordinates[0])
      .hexBinPointWeight(d => d.properties.mag)
      .hexAltitude(({ sumWeight }) => sumWeight * 0.0025)
      .hexLabel(d => `
        <b>${d.points.length}</b> 'ÙŽActive Group(s)'<ul><li>
          ${d.points.slice().sort((a, b) => b.properties.mag - a.properties.mag).map(d => d.properties.title).join('</li><li>')}
        </li></ul>
      `)
      (document.getElementById('globeViz'));

    fetch('list.geojson').then(res => res.json()).then(equakes => {
      myGlobe.hexBinPointsData(equakes.features);
    });

  </script> -->
  <!-- ********** -->

</body>